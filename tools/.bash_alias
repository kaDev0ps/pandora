# Basic commands
alias up='uptime -p'                                            # Show system uptime in a human-readable format
alias arg='rg --color=auto'                                      # Enable color output for ripgrep for Alt
alias scat='sudo cat -n'                                        # Open cat with line numbers for root
alias c='clear'                                                 # Clear the terminal screen
alias ipa='ip -br -c a'                                          # Show network interfaces and IP
alias l='ls -lh'                                                # List files with human-readable sizes
alias lo='locate'                                               # Find files by name using the locate database
alias df='df -h'                                                # Show disk space usage in human-readable format
alias ..='cd ..'                                                # Go up one directory
alias ll='lsd -lh --icon=never'                                 # List files with human-readable sizes without icons
alias la='ls -lah --color=auto'                                 # List all files including hidden ones with color
alias mkdir='mkdir -pv'                                         # Create directories and show the progress
alias svim='sudo vim'                                           # Open vim with line numbers for root
alias psg='ps aux | grep'                                       # Search for a process by name
alias vs='sudo visudo'                                          # Launch visudo
alias r='ranger'                                                # Launch ranger
alias del='sudo rm -rf'                                         # Recursive delete with sudo
alias duse='du -ah --max-depth=1 $(pwd) | sort -rh | head -n 10' # Check size of files in the current directory
alias dlog='du -sh /var/log/* 2>/dev/null | sort -hr | head -n 10' # Check size of logs
alias ncdu='sudo ncdu'                                          # Show disk usage with ncdu
alias lsof='sudo lsof -i'                                       # Show services on my ports
alias gr="grep -Ev '^\s*#|^$'"                                  # Show file without comment and empty line
alias col='column -t -s'                                        # Column tail     Example: col ' ' or col ','
alias cutc='cut -c'                                             # Show short logs Example: cutc 1-200 

# Updates
## Display system information
alias mtr10='mtr -r -c 10'                                      # Run traceroute with 10 cycles
alias mtr100='mtr -r -c 100'                                    # Run traceroute with 100 cycles
alias sysinfo='uname -a; lsb_release -a'                        # Show system and version info
alias update='sudo apt update'                                  # Update package lists
alias clean='sudo apt clean'                                    # Clean local repository of retrieved package files
alias autoremove='sudo apt autoremove -y'                       # Remove unnecessary packages automatically

# Monitoring
alias h='history'                                               # View command history
alias j='jobs -l'                                               # List current jobs
alias du='du -ch'                                               # Show disk usage of files and directories in human-readable format
alias sdu='du -sh /var/log/* 2>/dev/null | sort -hr | head -n 10' # Check big files in log directory
alias ports='sudo ss -tulnp'                                    # Show open ports and listening sockets
alias free='free -m -l -t'                                      # Display memory usage in megabytes
alias psmem='sudo ps auxf | sort -nr -k 4 | head -10'           # Show top 10 processes by memory usage
alias pscpu='sudo ps auxf | sort -nr -k 3 | head -10'           # Show top 10 processes by CPU usage
alias myip='curl ifconfig.me'                                   # Get the external IP address

# Networking
alias dnstop='sudo dnstop -l 5 enp0s3'                          # Monitor DNS traffic on interface enp0s3
alias vnstat='sudo vnstat -i enp0s3'                            # View network traffic stats on interface enp0s3
alias ift='sudo iftop -i'                                       # Display bandwidth usage on an interface
alias tcpdump='sudo tcpdump -i enp0s3'                          # Capture packet data on the specified interface

# Systemctl
alias sss='sudo systemctl stop'                                 # Stop a systemd service
alias ssr='sudo systemctl restart'                              # Restart a systemd service
alias sse='sudo systemctl enable'                               # Enable a systemd service to start on boot
alias ssd='sudo systemctl disable'                              # Disable a systemd service from starting on boot
alias ssc='sudo systemctl cat'                                  # Show the contents of a systemd service file
alias ssi='sudo systemctl status'                               # Check the status of a systemd service
alias slu='sudo systemctl list-units --type=service'            # List all systemd services
alias sdr='sudo systemctl daemon-reload'                        # Reload systemctl
alias srr='sudo systemctl reset-failed'                         # Reset systemctl failed state
alias edit='sudo systemctl edit'                                # Edit systemd units
alias scg='systemd-cgtop -d 5'                                  # Show more loaded services

# Journalctl
# View system logs
alias logs='sudo journalctl -xe'                                # Show recent logs with detailed error messages
alias err='grep -biw "error"'                                   # Search for error keyword in logs
alias jfeu='sudo journalctl -n 20 -feu'                         # Sjow 20 last line and new logs

# Clean system logs
alias clearlogs='sudo journalctl --vacuum-time=1d'              # Remove logs older than 1 day

# Archiving
# Create a tar.gz archive
alias taz='tar -czvf'                                           # Create a compressed tarball

# Extract a tar.gz archive
alias untaz='tar -xzvf'                                         # Extract a compressed tarball

# Tools
alias iot='sudo iotop -oPa'                                     # TOP processes that actively use the disk (I/O)
alias ios='iostat  -mpxz'                                       # Information on disk usage
export HISTTIMEFORMAT="%d.%m.20%y %T "                          # Timestamp format in history
alias envr="source ~/ranger-env/bin/activate"                   # Activate ranger virtual environment
alias envs="deactivate"                                         # Deactivate virtual environment
alias pssh="parallel-ssh"                                       # Parallel SSH command execution
alias pssc="parallel-scp"                                       # Parallel file copy
alias fd="fdfind"                                               # Find files in OS

# GIT
alias gitp='gitc && git push'                                   # Commit and push to remote repo

# Load Balancer
alias nt='sudo nginx -t'                                        # Test nginx config
alias at='sudo angie -t'                                        # Test angie config
alias srn='sudo systemctl reload nginx'                         # Reload nginx service
alias sra='sudo systemctl reload angie'                         # Reload angie service

# Environment
export EDITOR=vim

# N3. Netrika
alias n3='for UNIT in $(systemctl list-unit-files "r*.service" --type=service --no-legend | awk "{print \$1}"); do PORT=$(systemctl show "$UNIT" --property=Environment | grep -oP "(?<=:)\d+"); if [ -n "$PORT" ]; then echo "$PORT $UNIT"; fi; done'

# Functions
gitc() {
  git add . && git commit -m "$(date '+%Y-%m-%d %H:%M:%S')" || echo "Git commit failed"
}

# Data in history
setopt extendedhistory
HIST_STAMPS="%F %T"

### DOCKER ###

# User and access management
alias adduserd='sudo usermod -aG docker netrika_ka'                   # Add user to "docker" group (run once, then re-login).

# Check status Docker
alias dps='docker ps -a'                                         # List all containers, including stopped ones.     Example: dps
alias ddf='docker system df'                                     # Check image and resource usage size.             Example: ddf
alias dinspect='docker inspect'                                  # View container's IP address.                     Example: dinspect mycontainer
alias ddiff='docker diff'                                        # Changes in the container's filesystem.           Example: ddiff mycontainer

# Docker container management
alias drun='docker run -it'                                      # Interactive container startup.                   Example: drun ubuntu bash  container.
alias drunn='docker run --name'                                  # Start container with a name.                     Example: drunn mynameubuntu -it ubuntu bash 
alias drund='docker run -d'                                      # Start a container in the background.             Example: drund nginx
alias dstop='docker stop'                                        # Stop a container.                                Example: dstop mycontainer 
alias dstart='docker start'                                      # Start a previously stopped container.            Example: dstart mycontainer
alias dr='docker restart'                                        # Restart a container.                             Example: drestart mycontainer
alias drm='docker rm'                                            # Remove a container.                              Example: drm mycontainer
alias drmcall='docker rm -v $(docker ps -aq -f status=exited)'   # Remove all stopped containers.                   Example: drmcall
alias drmiall='docker rmi $(docker images -q) --force'           # Remove all images.                               Example: drmiall
alias dimagesrm='docker images -a -q | xargs docker rmi'         # Delete all images.                               Example: dimagesrm

# Network and configuration
alias drunhost='docker run -h'                                   # Set custom hostname for the container.           Example: drunhost myhost -it ubuntu bash
alias drunp='docker run -d -p'                                   # Port forwarding.                                 Example: drunp 8000:8080 nginx
alias dexec='docker exec -it'                                    # Enter a running container interactively.         Example: dexec mycontainer bash
alias dcp='docker cp'                                            # Copy a file into a container.                    Example: dcp myfile.txt mycontainer:/root/
alias dcreate='docker create -it --name'                         # Create container without starting.               Example: dcreate mycontainer ubuntu
alias drename='docker rename'                                    # Rename a container.                              Example: drename oldname newname
alias dcommit='docker commit'                                    # Save container changes as a new image.           Example: dcommit mycontainer mynewimage

# Logs and runtime state
alias dlogs='docker logs'                                        # View container logs.                             Example: dlogs mycontainer
alias devents='docker events'                                    # Show Docker events stream.                       Example: devents
alias drestart='sudo systemctl restart docker'                   # Restart the Docker service.                      Example: drestartsvc
alias dattach='docker attach'                                    # Attach to a running container.                   Example: dattach mycontainer

# Image search and distribution
alias dsearch='docker search'                                    # Search images on Docker Hub.                     Example: dsearch nginx
alias dpull='docker pull'                                        # Pull/download an image.                          Example: dpull nginx
alias dpush='docker push'                                        # Push your image to a registry.                   Example: dpush myimage

# Mounting and permissions
alias dexecmkdir='docker exec -it'                               # Create folder in a running container.            Example: dexecmkdir mycontainer /data


# Docker Compose aliases
alias dcup='docker compose up'                                   # Start and create containers as per docker-compose.yml.       Example: dcup
alias dcupd='docker compose up -d'                               # Start containers detached in the background.                 Example: dcupd
alias dcstop='docker compose stop'                               # Stop running containers without removing.                    Example: dcstop
alias dcdown='docker compose down'                               # Stop and remove containers, networks, and default volumes.   Example: dcdown
alias dcb='docker compose build'                                 # Build or rebuild service images.                             Example: dcb
alias dcrestart='docker compose restart'                         # Restart specified service or all if none specified.          Example: `dcrestart or dcrestart web`
alias dcps='docker compose ps'                                   # List running containers and their statuses.                  Example: dcps
alias dclogs='docker compose logs -f'                            # Show and follow logs live.                                   Example: dclogs
alias dcexec='docker compose exec'                               # Execute command inside a running service container.          Example (shell): dcexec web sh
alias dcrun='docker compose run'                                 # Run one-off command in a new container.                      Example: dcrun web npm test
alias dcrm='docker compose rm'                                   # Remove stopped service containers.                           Example: dcrm
alias dcpull='docker compose pull'                               # Pull the latest images from the registry.                    Example: dcpull
alias dccfg='docker compose config'                              # Validate and show merged docker-compose configuration.       Example: dccfg
alias dcscale='docker compose up --scale'                        # Scale a service to N instances.                              Example: dcscale web=3

# Docker stack
alias dnls='docker node ls'                                      # Check my cluster docker compose                              Example: dnls
alias dsls='docker service ls                                    # Check my services in cluster                                 Example: dsls
alias dsdeploy='docker stack deploy --compose-file'              # Deploy or update a stack using a compose file.               Example: dstackdeploy docker-compose.yml mystack
alias dsls='docker stack ls'                                     # List all stacks deployed in the swarm.                       Example: dstackls
alias dsservices='docker stack services'                         # List services running in a specific stack.                   Example: dstackservices mystack
alias dsps='docker stack ps'                                     # List all tasks (containers) in a stack with their status.    Example: dstackps mystack
alias dsrm='docker stack rm'                                     # Remove a stack and all its services.                         Example: dstackrm mystack
alias dslogs='docker service logs'                               # View logs for a specific service in a stack.                 Example: dservicelogs mystack_web
alias dsconfig='docker stack config'                             # Show the combined configuration of a stack.                  Example: dstackconfig mystack

# Run welcome script on SSH login
if [[ -n "$SSH_CONNECTION" ]]; then
  ~/tools/welcome.sh
fi
